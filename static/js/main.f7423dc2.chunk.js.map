{"version":3,"sources":["modules/Icon/Icon.tsx","modules/Icon/Report.tsx","modules/Icon/Warn.tsx","modules/Icon/Fire.tsx","modules/Icon/Weather.tsx","modules/Icon/Gun.tsx","modules/Icon/Gear.tsx","modules/Icon/Cross.tsx","modules/Icon/Refresh.tsx","modules/PageLayout.tsx","modules/Section.tsx","modules/Button.tsx","modules/ToggleButton.tsx","modules/AlertManager/AlertManagerContext.ts","modules/AlertManager/Alert.tsx","modules/AlertManager/AlertManager.tsx","modules/useDataPolling.ts","modules/useDataProvider.ts","modules/useLoader.ts","API/Resource.ts","API/delay.ts","API/DeviceResource.ts","Domain.ts","API/AudioAlertResource.ts","API/MotionResource.ts","API/HumidityResource.ts","API/TemperatureResource.ts","API/FloorPlanResource.ts","ComplianceTestPage/ComplianceTestPageLayout.tsx","ComplianceTestPage/ComplianceTestSection.tsx","ComplianceTestPage/ComplianceTestBar.tsx","ComplianceTestPage/EmergencyAudioAlertSection.tsx","ComplianceTestPage/EmergencyAudioAlertBar.tsx","ComplianceTestPage/SecurityAndMotionBar.tsx","ComplianceTestPage/FloorPlan/FloorPlanDevice.tsx","ComplianceTestPage/FloorPlan/FloorPlan.tsx","ComplianceTestPage/LastAnomalySection.tsx","ComplianceTestPage/HumiditySection.tsx","ComplianceTestPage/TemperatureSection.tsx","ComplianceTestPage/useDevicesProvider.ts","ComplianceTestPage/ComplianceTestPage.tsx","serviceWorker.js","index.tsx","App.tsx"],"names":["Icon","className","viewBox","path","rest","xmlns","filter","Boolean","join","d","Report","props","Warn","Fire","Weather","Gun","Gear","Cross","Refresh","PageLayout","header","body","footer","SectionKind","ButtonKind","SECTION_STYLES_MAP","Primary","Secondary","Section","kind","title","children","BUTTON_STYLES_MAP","Button","disabled","onClick","disabledClassName","type","ToggleButton","active","AlertManagerContext","React","useAlertManager","Alert","description","onClose","role","DEFAULT_TIMEOUT","AlertManager","timeout","alertDef","setAlertDef","setActive","timerId","handleClose","showAlert","newAlertDef","current","clearTimeout","ex","setTimeout","Provider","value","useDataPolling","dataProvider","data","setData","updateData","a","message","useDataProvider","fetchData","console","warn","useLoader","loader","loading","setLoading","API_URL","process","Resource","resourceBaseURL","dataField","baseURL","this","get","bind","getAll","id","fetch","query","method","input","init","resp","json","Error","delay","millis","Promise","resolve","AlertKind","AudioAlertStatus","DeviceResource","TestService","runTest","post","WaitTime","AudioAlertResource","AudioAlertService","toggleAudioAlert","alert","status","Status","Domain","Active","MotionResource","HumidityResource","TemperatureResource","loadFloorPlan","imgURL","reject","img","Image","onload","dataURL","w","naturalWidth","width","h","naturalHeight","height","onerror","src","ComplianceTestPageLayout","testBar","alertBar","motionBar","floorPlan","humidityBar","temperatureBar","renderToolbar","sections","visibleSections","length","map","section","i","key","ComplianceTestSection","inProgress","onTestRun","onReport","RUN_REPORT_URL","ComplianceTestBar","onTestSuccess","handleTest","handleReport","window","open","ALERT_ICONS_MAP","Shooter","EmergencyAudioAlertSection","toggledAlert","alerts","onToggle","toString","EmergencyAudioAlertBar","setToggledAlert","undefined","handleToggle","DATA_POLLING_TIMEOUT","SecurityAndMotionBar","motion","Motion","Area","pluralize","formatMotion","DEVICE_ICON_PATH","DEVICE_ICON_W","FloorPlanDevice","device","X","Y","RGB","size","scale","toFixed","transform","x","y","fill","DEV_SIZE_K","FloorPlan","devices","deviceSize","Math","ceil","min","href","dev","LastAnomalySection","HumiditySection","humidity","Humidity","LastAnomaly","TemperatureSection","temperature","Temperature","useDevicesProvider","ComplianceTestPage","fetchDevices","Number","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.f7423dc2.chunk.js","sourcesContent":["import * as React from 'react';\n\ninterface IconProps extends React.SVGAttributes<SVGElement> {\n  className?: string;\n  viewBox?: string;\n  path?: string;\n}\n\nexport function Icon({ className, viewBox = `0 0 24 24`, path, ...rest }: IconProps) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={['fill-current', className].filter(Boolean).join(' ')}\n      viewBox={viewBox}\n      {...rest}\n    >\n      <path d={path} />\n    </svg>\n  );\n}\n","import * as React from 'react';\nimport { Icon } from './Icon';\n\nexport const Report: typeof Icon = props => {\n  return (\n    <Icon\n      path=\"M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7zm12-4h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04-.39.08-.74.28-1.01.55-.18.18-.33.4-.43.64-.1.23-.16.49-.16.77v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM19 19H5V5h14v14z\"\n      viewBox=\"0 0 24 24\"\n      {...props}\n    />\n  );\n};\n","import * as React from 'react';\nimport { Icon } from './Icon';\n\nexport const Warn: typeof Icon = props => (\n  <Icon\n    path=\"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n    viewBox=\"0 0 24 24\"\n    {...props}\n  />\n);\n","import * as React from 'react';\nimport { Icon } from './Icon';\n\nexport const Fire: typeof Icon = props => (\n  <Icon\n    path=\"M11.57 13.16c-1.36.28-2.17 1.16-2.17 2.41 0 1.34 1.11 2.42 2.49 2.42 2.05 0 3.71-1.66 3.71-3.71 0-1.07-.15-2.12-.46-3.12-.79 1.07-2.2 1.72-3.57 2zM13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM12 20c-3.31 0-6-2.69-6-6 0-1.53.3-3.04.86-4.43 1.01 1.01 2.41 1.63 3.97 1.63 2.66 0 4.75-1.83 5.28-4.43C17.34 8.97 18 11.44 18 14c0 3.31-2.69 6-6 6z\"\n    viewBox=\"0 0 24 24\"\n    {...props}\n  />\n);\n","import * as React from 'react';\nimport { Icon } from './Icon';\n\nexport const Weather: typeof Icon = props => (\n  <Icon\n    path=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.61 5.64 5.36 8.04 2.35 8.36 0 10.9 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4h2c0-2.76-1.86-5.08-4.4-5.78C8.61 6.88 10.2 6 12 6c3.03 0 5.5 2.47 5.5 5.5v.5H19c1.65 0 3 1.35 3 3s-1.35 3-3 3z\"\n    viewBox=\"0 0 24 24\"\n    {...props}\n  />\n);\n","import * as React from 'react';\nimport { Icon } from './Icon';\n\nexport const Gun: typeof Icon = props => (\n  <Icon\n    path=\"M 4.4921875 1.9921875 A 0.50005 0.50005 0 0 0 4 2.5 L 4 3 L 3 3 A 0.50005 0.50005 0 0 0 2.6210938 3.1738281 L 1.1210938 4.9238281 A 0.50005 0.50005 0 0 0 1 5.25 L 1 6.5 A 0.50005 0.50005 0 0 0 1.5 7 L 2 7 C 2.2916667 7 2.4060173 7.0645331 2.4628906 7.1132812 C 2.5197636 7.1620302 2.5504386 7.2245091 2.5683594 7.3320312 C 2.6042004 7.5470755 2.5253906 7.8417969 2.5253906 7.8417969 L 1.0253906 12.341797 A 0.50005 0.50005 0 0 0 1.5 13 L 4.5 13 A 0.50005 0.50005 0 0 0 4.9785156 12.646484 L 6.0996094 9 L 7.265625 9 C 7.9192535 9 8.5027712 8.5726399 8.6972656 7.9472656 L 8.6953125 7.9472656 L 8.9921875 7 L 14.5 7 A 0.50005 0.50005 0 0 0 15 6.5 L 15 3.5 A 0.50005 0.50005 0 0 0 14.5 3 L 14 3 L 14 2.5 A 0.50005 0.50005 0 0 0 13.492188 1.9921875 A 0.50005 0.50005 0 0 0 13 2.5 L 13 3 L 5 3 L 5 2.5 A 0.50005 0.50005 0 0 0 4.4921875 1.9921875 z M 3.2304688 4 L 4.4199219 4 A 0.50005 0.50005 0 0 0 4.5820312 4 L 13.419922 4 A 0.50005 0.50005 0 0 0 13.582031 4 L 14 4 L 14 6 L 5.5351562 6 A 0.50005 0.50005 0 0 0 5.5 6 L 4.1328125 6 C 4.3648125 6.326 4.4791563 6.671 4.5351562 7 L 5.4941406 7 L 5.5 7 L 5.6699219 7 L 4.1308594 12 L 2.1933594 12 L 3.4746094 8.1582031 C 3.4746094 8.1582031 3.6458001 7.7029245 3.5566406 7.1679688 C 3.5120612 6.9004909 3.386486 6.5879702 3.1152344 6.3554688 C 2.8439827 6.1229673 2.4583333 6 2 6 L 2 5.4355469 L 3.2304688 4 z M 6.7148438 7 L 7.9453125 7 L 7.7421875 7.6484375 L 7.7421875 7.6503906 C 7.6766819 7.8610195 7.4859965 8 7.265625 8 L 6.4082031 8 L 6.7148438 7 z\"\n    viewBox=\"0 0 16 16\"\n    {...props}\n  />\n);\n","import * as React from 'react';\nimport { Icon } from './Icon';\n\nexport const Gear: typeof Icon = props => (\n  <Icon\n    path=\"M116.7 66.28a52.86 52.86 0 0 1-1 8.18l9.8 7.57-1.78 4.67-1.77 4.67-12.36-.82a52.87 52.87 0 0 1-4.7 6.7L110 108.5l-3.75 3.3-3.75 3.32L92 108.67a52.6 52.6 0 0 1-7.45 3.9l-.66 12.3-4.87 1.2-4.86 1.2-6.38-10.66q-1.9.2-3.88.2-2.15 0-4.25-.14l-6.3 10.64-4.84-1.2-4.85-1.2-.7-12.43a52.6 52.6 0 0 1-6.7-3.5l-10.6 6.64-3.75-3.3-3.76-3.3 5.05-11.4a52.88 52.88 0 0 1-4.73-6.73l-12.34.9-1.8-4.66-1.8-4.67 9.7-7.67a52.8 52.8 0 0 1-1-8.05l-11.4-5 .56-4.95.54-4.97 12.26-2.3a52.37 52.37 0 0 1 2.94-7.83L8.4 32l2.8-4.14 2.8-4.14 12 3.68a53.06 53.06 0 0 1 6-5.33L29.57 9.8l4.4-2.37 4.43-2.35 8.95 8.86a52.4 52.4 0 0 1 8-1.98L59 0h10l3.66 11.96a52.4 52.4 0 0 1 7.8 1.9L89.26 5l4.42 2.3 4.43 2.34-2.3 12.27a52.98 52.98 0 0 1 6.2 5.5l11.9-3.7 2.9 4.1 2.84 4.1-7.8 9.8a52.34 52.34 0 0 1 2.86 7.5l12.3 2.17.6 4.96.57 4.95zM41 64a23 23 0 1 0 23-23 23 23 0 0 0-23 23z\"\n    viewBox=\"0 0 128 128\"\n    {...props}\n  />\n);\n","import * as React from 'react';\nimport { Icon } from './Icon';\n\nexport const Cross: typeof Icon = props => (\n  <Icon\n    path=\"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z\"\n    viewBox=\"0 0 20 20\"\n    {...props}\n  />\n);\n","import * as React from 'react';\nimport { Icon } from './Icon';\n\nexport const Refresh: typeof Icon = props => (\n  <Icon\n    path=\"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"\n    viewBox=\"0 0 24 24\"\n    {...props}\n  />\n);\n","import * as React from 'react';\n\ninterface PageLayoutProps {\n  header: JSX.Element;\n  body: JSX.Element;\n  footer: JSX.Element;\n}\n\nexport function PageLayout({ header, body, footer }: PageLayoutProps) {\n  return (\n    <div className=\"flex flex-col h-full\">\n      <header className=\"flex-grow-0 relative\">{header}</header>\n      <main className=\"flex-grow relative\">{body}</main>\n      <footer className=\"flex-grow-0 relative\">{footer}</footer>\n    </div>\n  );\n}\n","import * as React from 'react';\n\nexport enum SectionKind {\n  Primary,\n  Secondary\n}\n\ninterface SectionProps extends JSX.ElementChildrenAttribute {\n  className?: string;\n  kind: SectionKind;\n  title?: string;\n}\n\nconst SECTION_STYLES_MAP: { [key in SectionKind]: string } = {\n  [SectionKind.Primary]: 'bg-neutral text-black border-primary',\n  [SectionKind.Secondary]: 'bg-neutral text-black border-primary'\n};\n\nexport function Section({ className, kind = SectionKind.Primary, title, children }: SectionProps) {\n  return (\n    <section\n      className={[\n        'flex flex-no-wrap items-center',\n        'border-l-4',\n        'px-2 lg:px-4',\n        'h-12 lg:h-16',\n        SECTION_STYLES_MAP[kind],\n        className\n      ]\n        .filter(Boolean)\n        .join(' ')}\n      title={title}\n    >\n      <div\n        className={[\n          'flex-grow-0 flex-shrink-0',\n          'text-base tracking-tight',\n          'w-24',\n          'hidden lg:block lg:mr-2',\n          kind === SectionKind.Primary ? 'font-bold' : 'font-semibold'\n        ].join(' ')}\n      >\n        {title}\n      </div>\n      <div className=\"flex-grow\">{children}</div>\n    </section>\n  );\n}\n","import * as React from 'react';\n\nexport enum ButtonKind {\n  Primary,\n  Secondary\n}\n\nconst BUTTON_STYLES_MAP: { [key in ButtonKind]: string } = {\n  [ButtonKind.Primary]: 'bg-primary text-black border-transparent shadow hover:bg-p-dark hover:text-white',\n  [ButtonKind.Secondary]: 'bg-transparent text-primary border-p-light hover:bg-n-dark hover:border-primary'\n};\n\ninterface ButtonProps {\n  className?: string;\n  kind?: ButtonKind;\n  disabled?: boolean;\n  onClick: () => any;\n  children?: {};\n}\n\nexport function Button({ className, kind = ButtonKind.Primary, disabled, onClick, children }: ButtonProps) {\n  const disabledClassName = disabled ? 'opacity-75 cursor-wait' : 'cursor-pointer';\n  return (\n    <button\n      className={[\n        'flex flex-no-wrap items-center justify-center',\n        'text-sm',\n        'border rounded',\n        'trans-fast',\n        'p-2',\n        'focus:outline-none',\n        disabledClassName,\n        BUTTON_STYLES_MAP[kind],\n        className\n      ].join(' ')}\n      type=\"button\"\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n}\n","import * as React from 'react';\n\ninterface ToggleButtonProps {\n  className?: string;\n  active?: boolean;\n  disabled?: boolean;\n  onClick: () => any;\n  children?: {};\n}\n\nexport function ToggleButton({ className, active, disabled, onClick, children }: ToggleButtonProps) {\n  const disabledClassName = disabled ? 'opacity-75 cursor-wait' : 'cursor-pointer';\n  return (\n    <button\n      className={[\n        'flex flex-no-wrap items-center justify-center',\n        'text-sm leading-none',\n        'border rounded',\n        'trans-fast',\n        'shadow',\n        'p-2',\n        'focus:outline-none',\n        active\n          ? 'bg-primary text-black border-primary hover:bg-p-dark hover:text-white'\n          : 'bg-transparent text-black border-transparent hover:bg-p-dark hover:text-white',\n        disabledClassName,\n        className\n      ]\n        .filter(Boolean)\n        .join(' ')}\n      type=\"button\"\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n}\n","import * as React from 'react';\nimport { AlertDef } from './AlertDef';\n\ntype ShowAlert = (alert: AlertDef) => void;\n\nexport const AlertManagerContext = React.createContext<ShowAlert>(() => {});\n\nexport const useAlertManager = (): ShowAlert => React.useContext(AlertManagerContext);\n","import * as React from 'react';\nimport { Cross } from '../Icon';\nimport { AlertDef } from './AlertDef';\n\ninterface AlertProps extends AlertDef {\n  onClose: () => any;\n}\n\nexport function Alert({ title, description, onClose }: AlertProps) {\n  return (\n    <div className=\"bg-error border border-error rounded text-base text-white p-2 relative shadow\" role=\"alert\">\n      <strong className=\"font-semibold tracking-tight mr-2\">{title}</strong>\n      <span className=\"block sm:inline\">{description}</span>\n      <span className=\"absolute top-0 right-0\">\n        <Cross className=\"block w-4 h-4\" role=\"button\" onClick={onClose} />\n      </span>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { AlertManagerContext } from './AlertManagerContext';\nimport { Alert } from './Alert';\nimport { AlertDef } from './AlertDef';\nimport { clearTimeout } from 'timers';\n\ninterface AlertManagerProps extends JSX.ElementChildrenAttribute {\n  timeout?: number;\n}\n\nconst DEFAULT_TIMEOUT = 5 * 1000;\n\nexport function AlertManager({ timeout = DEFAULT_TIMEOUT, children }: AlertManagerProps) {\n  const [alertDef, setAlertDef] = React.useState<AlertDef>();\n  const [active, setActive] = React.useState(false);\n  const timerId = React.useRef<NodeJS.Timeout>();\n  const handleClose = React.useCallback(() => setActive(false), [setActive]);\n  const showAlert = React.useCallback(\n    (newAlertDef: AlertDef): void => {\n      setAlertDef(newAlertDef);\n      setActive(true);\n      try {\n        if (timerId.current) clearTimeout(timerId.current);\n      } catch (ex) {\n        // Do nothing\n      }\n      timerId.current = setTimeout(handleClose, timeout);\n    },\n    [setAlertDef, setActive, timerId, timeout, handleClose]\n  );\n  return (\n    <AlertManagerContext.Provider value={showAlert}>\n      {alertDef ? (\n        <div className={['trans fixed z-50 h-12 px-12 inset-x-0', active ? 'bottom-0' : '-bottom-12'].join(' ')}>\n          <Alert title={alertDef.title} description={alertDef.description} onClose={handleClose} />\n        </div>\n      ) : null}\n      {children}\n    </AlertManagerContext.Provider>\n  );\n}\n","import * as React from 'react';\nimport { useAlertManager } from './AlertManager';\n\nexport function useDataPolling<T>(dataProvider: () => Promise<T>, timeout: number): T | undefined {\n  const showAlert = useAlertManager();\n  const [data, setData] = React.useState<T>();\n  React.useEffect(() => {\n    let timerId: NodeJS.Timeout;\n    const updateData = async () => {\n      try {\n        setData(await dataProvider());\n      } catch (ex) {\n        showAlert({ title: 'Fetch Failure', description: ex.message });\n      }\n      timerId = setTimeout(updateData, timeout);\n    };\n    updateData();\n    return () => clearTimeout(timerId);\n  }, [setData, dataProvider, timeout, showAlert]);\n  return data;\n}\n","import * as React from 'react';\nimport { useAlertManager } from '../modules';\n\nexport function useDataProvider<D>(dataProvider: () => Promise<D>): [D | undefined, () => Promise<void>] {\n  const showAlert = useAlertManager();\n  const [data, setData] = React.useState<D>();\n  const fetchData = React.useCallback(async () => {\n    try {\n      setData(await dataProvider());\n    } catch (ex) {\n      console.warn(ex);\n      showAlert({ title: 'Data Fetch', description: ex.message });\n    }\n  }, [dataProvider, setData, showAlert]);\n  React.useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n  return [data, fetchData];\n}\n","import * as React from 'react';\n\nexport function useLoader<L extends Function>(loader: L): [boolean, L] {\n  const [loading, setLoading] = React.useState<boolean>();\n  const load = async (...args: any[]) => {\n    setLoading(true);\n    try {\n      await loader(...args);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return [loading || false, load as any];\n}\n","export const API_URL: string = process.env.API_URL || 'http://server.jabiliot.com';\n\nexport class Resource<T> {\n  private baseURL: string;\n  private dataField?: string;\n\n  constructor(resourceBaseURL: string, dataField?: string) {\n    this.baseURL = `${API_URL}/${resourceBaseURL}`;\n    this.dataField = dataField;\n    this.get = this.get.bind(this);\n    this.getAll = this.getAll.bind(this);\n  }\n\n  get(id?: string): Promise<T> {\n    return this.fetch([this.baseURL, id].filter(Boolean).join('/'));\n  }\n\n  async getAll(query?: string): Promise<T[]> {\n    const data = await this.fetch([this.baseURL, query].filter(Boolean).join('?'));\n    return this.dataField ? data[this.dataField] : data;\n  }\n\n  async post(query?: string) {\n    const data = await this.fetch([this.baseURL, query].filter(Boolean).join('?'), { method: 'POST' });\n    return this.dataField ? data[this.dataField] : data;\n  }\n\n  private async fetch(input: RequestInfo, init?: RequestInit): Promise<any> {\n    try {\n      const resp = await fetch(input, init);\n      return await resp.json();\n    } catch (ex) {\n      console.warn(input, ex);\n      throw new Error(`[${input}] ${ex.message}`);\n    }\n  }\n}\n","export function delay(millis: number): Promise<void> {\n  return new Promise(resolve => setTimeout(() => resolve(), millis));\n}\n","import { Resource } from './Resource';\nimport { delay } from './delay';\nimport * as Domain from '../Domain';\n\nexport const DeviceResource = new Resource<Domain.DeviceStatus>('/list_devices', 'Devices');\n\nconst TestService = new Resource<{ WaitTime: number }>('/run_test');\n\nexport async function runTest(): Promise<void> {\n  const { WaitTime } = await TestService.post();\n  await delay((WaitTime || 5) * 1000);\n}\n","export interface DeviceStatus {\n  X: number;\n  Y: number;\n  RGB: string;\n}\n\nexport enum AlertKind {\n  Weather = 1,\n  Fire = 2,\n  Shooter = 3\n}\n\nexport interface AudioAlert {\n  Number: AlertKind;\n  Text: string;\n}\n\nexport enum AudioAlertStatus {\n  Active = 'active',\n  Inactive = 'inactive'\n}\n\nexport interface MotionStatus {\n  Area: number;\n  Motion: number;\n}\n\nexport interface Humidity {\n  Humidity: string;\n  LastAnomaly: string;\n}\n\nexport interface Temperature {\n  Temperature: string;\n  LastAnomaly: string;\n}\n","import { Resource } from './Resource';\nimport * as Domain from '../Domain';\n\nexport const AudioAlertResource = new Resource<Domain.AudioAlert>('/list_alerts', 'Alerts');\n\nconst AudioAlertService = new Resource<{\n  Alert: Domain.AlertKind;\n  Status: Domain.AudioAlertStatus;\n}>('/alert');\n\nexport async function toggleAudioAlert(alert?: Domain.AlertKind): Promise<boolean> {\n  const status = await AudioAlertService.post(`${alert || 0}`);\n  return status.Status === Domain.AudioAlertStatus.Active;\n}\n","import { Resource } from './Resource';\nimport * as Domain from '../Domain';\n\nexport const MotionResource = new Resource<Domain.MotionStatus>('/list_motion');\n","import { Resource } from './Resource';\nimport * as Domain from '../Domain';\n\nexport const HumidityResource = new Resource<Domain.Humidity>('/list_humidity');\n","import { Resource } from './Resource';\nimport * as Domain from '../Domain';\n\nexport const TemperatureResource = new Resource<Domain.Temperature>('/list_temp');\n","import { API_URL } from './Resource';\n\ninterface FloorPlan {\n  dataURL: string;\n  w: number;\n  h: number;\n}\n\nexport async function loadFloorPlan(): Promise<FloorPlan> {\n  const imgURL = `${API_URL}/get_floorplan`;\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () =>\n      resolve({\n        dataURL: imgURL,\n        w: img.naturalWidth || img.width,\n        h: img.naturalHeight || img.height\n      });\n    img.onerror = reject;\n    img.src = imgURL;\n  });\n}\n","import * as React from 'react';\nimport { PageLayout } from '../modules';\n\ninterface ComplianceTestPageLayoutProps {\n  testBar: JSX.Element;\n  alertBar?: JSX.Element | null;\n  motionBar: JSX.Element;\n  floorPlan: JSX.Element;\n  humidityBar?: JSX.Element | null;\n  temperatureBar?: JSX.Element | null;\n}\n\nexport function ComplianceTestPageLayout({\n  testBar,\n  alertBar,\n  motionBar,\n  floorPlan,\n  humidityBar,\n  temperatureBar\n}: ComplianceTestPageLayoutProps) {\n  return (\n    <PageLayout\n      header={renderToolbar([testBar, alertBar])}\n      body={\n        <div className=\"absolute inset-0 overflow-auto overflow-x-hidden border-t border-b border-primary\">\n          {floorPlan}\n        </div>\n      }\n      footer={renderToolbar([motionBar, humidityBar, temperatureBar])}\n    />\n  );\n}\n\nfunction renderToolbar(sections: (JSX.Element | null | undefined)[]) {\n  const visibleSections = sections.filter(Boolean) as JSX.Element[];\n  if (!visibleSections || !visibleSections.length) return <div />;\n  if (visibleSections.length === 1) return <div className=\"w-full\">{visibleSections[0]}</div>;\n  return (\n    <div className=\"flex flex-wrap\">\n      {visibleSections.map((section, i) => (\n        <div key={i} className={`w-1/${visibleSections.length}`}>\n          {section}\n        </div>\n      ))}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { Icon, Section, SectionKind, Button, ButtonKind } from '../modules';\n\ninterface TestSectionProps {\n  inProgress?: boolean;\n  onTestRun: () => any;\n  onReport: () => any;\n}\n\nexport function ComplianceTestSection({ inProgress, onTestRun, onReport }: TestSectionProps) {\n  return (\n    <Section title=\"Compliance\" kind={SectionKind.Primary}>\n      <div className=\"flex flex-no-wrap items-center\">\n        <Button className=\"mr-2\" kind={ButtonKind.Primary} disabled={inProgress} onClick={onTestRun}>\n          <Icon.Refresh className={['mr-1', 'w-4 h-4', inProgress ? 'loader' : ''].filter(Boolean).join(' ')} />\n          <span className=\"font-semibold\">TEST</span>\n        </Button>\n        <Button kind={ButtonKind.Secondary} disabled={inProgress} onClick={onReport}>\n          <Icon.Report className=\"mr-1 w-4 h-4\" />\n          <span className=\"font-semibold\">REPORT</span>\n        </Button>\n      </div>\n    </Section>\n  );\n}\n","import * as React from 'react';\nimport { runTest } from '../API';\nimport { useLoader, useAlertManager } from '../modules';\nimport { ComplianceTestSection } from './ComplianceTestSection';\n\nconst RUN_REPORT_URL = process.env.RUN_REPORT_URL || 'http://server.jabiliot.com/run_report';\n\nexport function ComplianceTestBar({ onTestSuccess }: { onTestSuccess: () => any }) {\n  const showAlert = useAlertManager();\n  const [inProgress, handleTest] = useLoader(async () => {\n    try {\n      await runTest();\n      onTestSuccess();\n    } catch (ex) {\n      showAlert({ title: 'Test Failure', description: ex.message });\n    }\n  });\n  const handleReport = React.useCallback(() => {\n    window.open(RUN_REPORT_URL, 'ComplianceTestReport');\n  }, []);\n  return <ComplianceTestSection inProgress={inProgress} onTestRun={handleTest} onReport={handleReport} />;\n}\n","import * as React from 'react';\nimport * as Domain from '../Domain';\nimport { Icon, Section, SectionKind, ToggleButton } from '../modules';\n\nconst ALERT_ICONS_MAP: {\n  [key in Domain.AlertKind]: React.ReactElement<React.ComponentProps<typeof Icon.Icon>, typeof Icon.Icon>;\n} = {\n  [Domain.AlertKind.Fire]: <Icon.Fire className=\"w-6\" />,\n  [Domain.AlertKind.Weather]: <Icon.Weather className=\"w-6\" />,\n  [Domain.AlertKind.Shooter]: <Icon.Gun className=\"w-6\" />\n};\n\ninterface AlertSectionProps {\n  toggledAlert?: Domain.AlertKind;\n  alerts: Domain.AlertKind[];\n  loading?: boolean;\n  onToggle: (kind: Domain.AlertKind) => any;\n}\n\nexport function EmergencyAudioAlertSection({ toggledAlert, alerts, loading, onToggle }: AlertSectionProps) {\n  return (\n    <Section title=\"Emergency Audio Alert\" kind={SectionKind.Primary}>\n      <div className=\"flex flex-no-wrap\">\n        {alerts.map(kind => (\n          <ToggleButton\n            key={kind.toString()}\n            className=\"mr-2\"\n            active={toggledAlert === kind}\n            disabled={loading}\n            onClick={() => onToggle(kind)}\n          >\n            {ALERT_ICONS_MAP[kind]}\n          </ToggleButton>\n        ))}\n      </div>\n    </Section>\n  );\n}\n","import * as React from 'react';\nimport * as Domain from '../Domain';\nimport { toggleAudioAlert } from '../API';\nimport { useLoader } from '../modules';\nimport { EmergencyAudioAlertSection } from './EmergencyAudioAlertSection';\n\nexport function EmergencyAudioAlertBar({ alerts }: { alerts: Domain.AlertKind[] }) {\n  const [toggledAlert, setToggledAlert] = React.useState<Domain.AlertKind>();\n  const [loading, handleToggle] = useLoader(async (alert: Domain.AlertKind) => {\n    setToggledAlert(alert);\n    const active = await toggleAudioAlert(alert);\n    setToggledAlert(active ? alert : undefined);\n  });\n  return (\n    <EmergencyAudioAlertSection toggledAlert={toggledAlert} alerts={alerts} loading={loading} onToggle={handleToggle} />\n  );\n}\n","import * as React from 'react';\nimport pluralize from 'pluralize';\nimport * as Domain from '../Domain';\nimport { MotionResource } from '../API';\nimport { Section, SectionKind, useDataPolling } from '../modules';\n\nconst DATA_POLLING_TIMEOUT = 10 * 1000;\n\nexport function SecurityAndMotionBar() {\n  const motion = useDataPolling(MotionResource.get, DATA_POLLING_TIMEOUT);\n  return (\n    <Section title=\"Security /Motion\" kind={SectionKind.Secondary}>\n      {formatMotion(motion)}\n    </Section>\n  );\n}\n\nfunction formatMotion(motion?: Domain.MotionStatus) {\n  return motion && motion.Motion ? `Motion in ${motion.Area} ${pluralize('area')}` : 'No motion';\n}\n","import * as React from 'react';\nimport * as Domain from '../../Domain';\n\nconst DEVICE_ICON_PATH =\n  'M22 9V7h-2V5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2v-2h-2V9h2zm-4 10H4V5h14v14zM6 13h5v4H6v-4zm6-6h4v3h-4V7zM6 7h5v5H6V7zm6 4h4v6h-4v-6z';\nconst DEVICE_ICON_W = 24;\n\ninterface FloorPlanDeviceProps {\n  device: Domain.DeviceStatus;\n  size?: number;\n}\n\nexport function FloorPlanDevice({ device: { X, Y, RGB }, size }: FloorPlanDeviceProps) {\n  const scale = size ? (size / DEVICE_ICON_W).toFixed(1) : 1;\n  return <path transform={`matrix(${scale} 0 0 ${scale} ${X} ${Y})`} x={X} y={Y} fill={RGB} d={DEVICE_ICON_PATH} />;\n}\n","import * as React from 'react';\nimport * as Domain from '../../Domain';\nimport { loadFloorPlan } from '../../API';\nimport { useDataProvider } from '../../modules';\nimport { FloorPlanDevice } from './FloorPlanDevice';\n\ninterface FloorPlanProps {\n  devices: Domain.DeviceStatus[];\n}\n\nconst DEV_SIZE_K = 10;\n\nexport function FloorPlan({ devices }: FloorPlanProps) {\n  const [floorPlan] = useDataProvider(loadFloorPlan);\n  const deviceSize = floorPlan ? Math.ceil(Math.min(floorPlan.w, floorPlan.h) / DEV_SIZE_K) : undefined;\n  return floorPlan ? (\n    <svg viewBox={`0 0 ${floorPlan.w} ${floorPlan.h}`} className=\"w-full\">\n      <image href={floorPlan.dataURL} x=\"0\" y=\"0\" />\n      {devices.map(dev => (\n        <FloorPlanDevice key={`${dev.X}${dev.Y}`} device={dev} size={deviceSize} />\n      ))}\n    </svg>\n  ) : null;\n}\n","import * as React from 'react';\n\nexport function LastAnomalySection({ children }: JSX.ElementChildrenAttribute) {\n  return (\n    <div className=\"flex flex-col justify-between items-end text-xs lg:text-sm tracking-tight\">\n      <div>\n        <strong className=\"font-semibold\">Last Anomaly</strong>\n      </div>\n      <div>{children}</div>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport * as Domain from '../Domain';\nimport { Section, SectionKind } from '../modules';\nimport { LastAnomalySection } from './LastAnomalySection';\n\nexport function HumiditySection({ humidity: { Humidity, LastAnomaly } }: { humidity: Domain.Humidity }) {\n  return (\n    <Section title=\"Humidity\" kind={SectionKind.Secondary}>\n      <div className=\"flex flex-no-wrap justify-between items-center\">\n        <strong className=\"font-semibold\">{Humidity}</strong>\n        <LastAnomalySection>{LastAnomaly}</LastAnomalySection>\n      </div>\n    </Section>\n  );\n}\n","import * as React from 'react';\nimport * as Domain from '../Domain';\nimport { Section, SectionKind } from '../modules';\nimport { LastAnomalySection } from './LastAnomalySection';\n\nexport function TemperatureSection({ temperature: { Temperature, LastAnomaly } }: { temperature: Domain.Temperature }) {\n  return (\n    <Section title=\"Temperature\" kind={SectionKind.Secondary}>\n      <div className=\"flex flex-no-wrap justify-between items-center\">\n        <strong className=\"font-semibold\">{Temperature}</strong>\n        <LastAnomalySection>{LastAnomaly}</LastAnomalySection>\n      </div>\n    </Section>\n  );\n}\n","import { useDataProvider } from '../modules';\nimport { DeviceResource } from '../API';\n\nexport const useDevicesProvider = () => useDataProvider(DeviceResource.getAll);\n","import * as React from 'react';\nimport { AudioAlertResource, HumidityResource, TemperatureResource } from '../API';\nimport { useDataPolling } from '../modules';\nimport { ComplianceTestPageLayout } from './ComplianceTestPageLayout';\nimport { ComplianceTestBar } from './ComplianceTestBar';\nimport { EmergencyAudioAlertBar } from './EmergencyAudioAlertBar';\nimport { SecurityAndMotionBar } from './SecurityAndMotionBar';\nimport { FloorPlan } from './FloorPlan';\nimport { HumiditySection } from './HumiditySection';\nimport { TemperatureSection } from './TemperatureSection';\nimport { useDevicesProvider } from './useDevicesProvider';\n\nconst DATA_POLLING_TIMEOUT = 10 * 1000;\n\nexport function ComplianceTestPage() {\n  const [devices, fetchDevices] = useDevicesProvider();\n  const alerts = useDataPolling(AudioAlertResource.getAll, DATA_POLLING_TIMEOUT);\n  const humidity = useDataPolling(HumidityResource.get, DATA_POLLING_TIMEOUT);\n  const temperature = useDataPolling(TemperatureResource.get, DATA_POLLING_TIMEOUT);\n  return (\n    <ComplianceTestPageLayout\n      testBar={<ComplianceTestBar onTestSuccess={fetchDevices} />}\n      alertBar={\n        alerts && alerts.length ? (\n          <EmergencyAudioAlertBar alerts={(alerts || []).map(({ Number: kind }) => kind)} />\n        ) : null\n      }\n      motionBar={<SecurityAndMotionBar />}\n      floorPlan={<FloorPlan devices={devices || []} />}\n      humidityBar={humidity ? <HumiditySection humidity={humidity} /> : null}\n      temperatureBar={temperature ? <TemperatureSection temperature={temperature} /> : null}\n    />\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import * as React from 'react';\nimport { AlertManager } from './modules';\nimport { ComplianceTestPage } from './ComplianceTestPage';\n\nexport function App() {\n  return (\n    <AlertManager>\n      <ComplianceTestPage />\n    </AlertManager>\n  );\n}\n"],"sourceRoot":""}